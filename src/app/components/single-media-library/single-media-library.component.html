<!-- media-library-modal.component.html -->
<div
  #modalRef
  class="modal fade"
  tabindex="-1"
  aria-labelledby="mediaModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-xl modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Select file</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>

      <div class="modal-body">
        <!-- Filters: Optional static filter UI -->
        <div class="search-wrapper mb-2">
          <!-- Left: Search + Filters -->
          <div class="search-area">
            <div class="search-input-wrapper">
              <i class="bi bi-search"></i>
              <input
                type="text"
                class="form-control search-input"
                placeholder="Search files"
              />
            </div>
            <div class="filter-buttons d-flex">
              <select class="filter-select">
                <option selected disabled>File type</option>
                <option>Image</option>
                <option>Video</option>
              </select>
              <select class="filter-select">
                <option selected disabled>File size</option>
                <option>Small</option>
                <option>Large</option>
              </select>
              <select class="filter-select">
                <option selected disabled>Used in</option>
                <option>Project A</option>
                <option>Project B</option>
              </select>
              <select class="filter-select">
                <option selected disabled>Product</option>
                <option>App 1</option>
                <option>App 2</option>
              </select>
            </div>
          </div>

          <!-- Right: Sort + View -->
          <div class="action-buttons d-flex gap-2">
            <button class="sort-button">
              <i class="bi bi-arrow-down-up"></i> Sort
            </button>
            <select>
              <option selected>Grid View</option>
              <option>List View</option>
            </select>
          </div>
        </div>

        <!-- Media grid -->
        <div class="media-grid mt-4">
          <div
            class="media-card position-relative"
            *ngFor="let media of medias"
            (click)="toggleMediaSelection(media.url)"
            [class.border-primary]="isSelectedMedia(media.url)"
            style="cursor: pointer"
          >
            <img [src]="media.url" alt="media preview" />
            <div class="caption">{{ media.filename }}</div>

            <input
              type="checkbox"
              class="form-check-input position-absolute"
              style="top: 6px; left: 6px"
              [checked]="isSelectedMedia(media.url)"
              (click)="
                $event.stopPropagation(); toggleMediaSelection(media.url)
              "
            />
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button class="btn btn-secondary btn-sm" data-bs-dismiss="modal">
          Cancel
        </button>
        <button
          class="btn btn-primary btn-sm"
          data-bs-dismiss="modal"
          (click)="onModalConfirmSelection()"
        >
          Done
        </button>
      </div>
    </div>
  </div>
</div>
